

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>avn package &mdash; avn 0.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="avn" href="modules.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> avn
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">AVN Getting Started Tutorial</a></li>
</ul>
<p><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">AVN Getting Started Tutorial</a></li>
</ul>
<p><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">avn</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">avn package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-avn.dataloading">avn.dataloading module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-avn.plotting">avn.plotting module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-avn.segmentation">avn.segmentation module</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">avn</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">avn</a> &raquo;</li>
        
      <li>avn package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/avn.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="avn-package">
<h1>avn package<a class="headerlink" href="#avn-package" title="Permalink to this headline">¶</a></h1>
<section id="module-avn.dataloading">
<span id="avn-dataloading-module"></span><h2>avn.dataloading module<a class="headerlink" href="#module-avn.dataloading" title="Permalink to this headline">¶</a></h2>
<p>Created on Wed Apr 28 09:05:15 2021</p>
<p>&#64;author: Therese</p>
<dl class="py class">
<dt id="avn.dataloading.SongFile">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">avn.dataloading.</span></code><code class="sig-name descname"><span class="pre">SongFile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.dataloading.SongFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Data and metadata pertaining to a single audio file.</p>
<dl class="py attribute">
<dt id="avn.dataloading.SongFile.data">
<code class="sig-name descname"><span class="pre">data</span></code><a class="headerlink" href="#avn.dataloading.SongFile.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains audio data of wavfile.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="avn.dataloading.SongFile.sample_rate">
<code class="sig-name descname"><span class="pre">sample_rate</span></code><a class="headerlink" href="#avn.dataloading.SongFile.sample_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>Sample rate of song data. Based on native sample rate of wavfile.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="avn.dataloading.SongFile.duration">
<code class="sig-name descname"><span class="pre">duration</span></code><a class="headerlink" href="#avn.dataloading.SongFile.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>Duration of the audio file in seconds.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="avn.dataloading.SongFile.file_path">
<code class="sig-name descname"><span class="pre">file_path</span></code><a class="headerlink" href="#avn.dataloading.SongFile.file_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the local .wav file used to instantiate the SongFile object.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="avn.dataloading.SongFile.bandpass_filter">
<code class="sig-name descname"><span class="pre">bandpass_filter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lower_cutoff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_cutoff</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.dataloading.SongFile.bandpass_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a hamming window bandpass filter to the audio data.</p>
</dd></dl>

<dl class="py method">
<dt id="id0">
<code class="sig-name descname"><span class="pre">bandpass_filter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lower_cutoff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_cutoff</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id0" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a hamming window bandpass filter to the audio data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lower_cutoff</strong> (<em>int</em>) – Lower cutoff frequency in Hz for the filter.</p></li>
<li><p><strong>upper_cutoff</strong> (<em>int</em>) – Upper cutoff frequency in Hz for the filter.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="avn.dataloading.Utils">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">avn.dataloading.</span></code><code class="sig-name descname"><span class="pre">Utils</span></code><a class="headerlink" href="#avn.dataloading.Utils" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Contains data loading utilities.</p>
<dl class="py method">
<dt id="avn.dataloading.Utils.add_ev_song_truth_table">
<code class="sig-name descname"><span class="pre">add_ev_song_truth_table</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.dataloading.Utils.add_ev_song_truth_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a ‘ground truth’ segmentation file generated in evsonganaly, and
adds it as a <cite>.true_seg_table</cite> attribute to the provided <cite>seg_data</cite> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seg_data</strong> (<em>avn.segmentation.SegData object</em>) – SegData object containing segmentations of files corresponding to
the evsonganaly ground truth segmentation in the file indicated by
<cite>file_path</cite></p></li>
<li><p><strong>file_path</strong> (<em>str</em>) – String containing the full file path to a ‘ground truth’ segmentation
.csv file generated with evsonganaly.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>seg_data</strong> – Same <cite>seg_data</cite> object as passed as input, but with the added
<cite>.true_seg_table</cite> attribute, containing segmentation information from
the file indicated by <cite>file_path</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>avn.segmentation.SegData object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="avn.dataloading.Utils.clean_seg_table">
<code class="sig-name descname"><span class="pre">clean_seg_table</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#avn.dataloading.Utils.clean_seg_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Reformats syllable data frames imported from evsonganaly, so that they
have the same format as avn generated seg_tables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>syll_table</strong> (<em>pandas DataFrame</em>) – Dataframe imported from a csv containing syllable segmentation and
labeling generated in evsonganaly in MATLAB.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>syll_table</strong> – seg_table style dataframe, with syllable onset and offset times,
labels  and file names.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas DataFrame</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-avn.plotting">
<span id="avn-plotting-module"></span><h2>avn.plotting module<a class="headerlink" href="#module-avn.plotting" title="Permalink to this headline">¶</a></h2>
<p>Created on Tue May  4 13:39:10 2021</p>
<p>&#64;author: Therese</p>
<dl class="py function">
<dt id="avn.plotting.make_spectrogram">
<code class="sig-prename descclassname"><span class="pre">avn.plotting.</span></code><code class="sig-name descname"><span class="pre">make_spectrogram</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">song</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.plotting.make_spectrogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates spectrogram information for plotting</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>song</strong> (<em>avn.dataloading.SongFile object</em>) – SongFile object corresponding to the file to be plotted</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>spectrogram_db</strong> – Array containing spectrogram data for plotting.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy ndarray, 2D</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="avn.plotting.plot_spectrogram">
<code class="sig-prename descclassname"><span class="pre">avn.plotting.</span></code><code class="sig-name descname"><span class="pre">plot_spectrogram</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spectrogram</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(20,</span> <span class="pre">5)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.plotting.plot_spectrogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots a spectrogram of a song.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spectrogram</strong> (<em>numpy ndarray</em><em>, </em><em>2D</em>) – Array containing spectrogram data.</p></li>
<li><p><strong>sample_rate</strong> (<em>int</em>) – Sample rate of audio. Necessary to determine time along the x-axis.</p></li>
<li><p><strong>ax</strong> (<em>matplotlob.axes._subplots.AxesSubplot object</em>) – Axis object must be specified if you want to plot the spectrogram as a
subplot within a matplotlib.pyplot figure with other subplots as well.
If plotting a spectrogram alone, ax doesn’t need to be specified.</p></li>
<li><p><strong>figsize</strong> (<em>tuple of floats</em><em>, </em><em>optional</em>) – Specifies the dimensions of the output plot. The default is (20, 5).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-avn.segmentation">
<span id="avn-segmentation-module"></span><h2>avn.segmentation module<a class="headerlink" href="#module-avn.segmentation" title="Permalink to this headline">¶</a></h2>
<p>Created on Wed May  5 08:29:00 2021</p>
<p>&#64;author: Therese</p>
<dl class="py class">
<dt id="avn.segmentation.MFCC">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">avn.segmentation.</span></code><code class="sig-name descname"><span class="pre">MFCC</span></code><a class="headerlink" href="#avn.segmentation.MFCC" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="segmentation.html#avn.segmentation.Segmenter" title="avn.segmentation.Segmenter"><code class="xref py py-class docutils literal notranslate"><span class="pre">avn.segmentation.Segmenter</span></code></a></p>
<p>Child class of avn.segmentation.Segmenter(), which segments syllables based
on threshold crossing of the first mel frequency cepstral coefficient
(MFCC).</p>
<dl class="py method">
<dt id="avn.segmentation.MFCC.get_seg_criteria">
<code class="sig-name descname"><span class="pre">get_seg_criteria</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">song</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hop_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">512</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_fft</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2048</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bandpass</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rescale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.MFCC.get_seg_criteria" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the first MFCC component at every frame of a song file for
later use in threshold crossing-based segmentation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>song</strong> (<em>avn.dataloading.SongFile class instance</em>) – Contains audio data for a single song file</p></li>
<li><p><strong>hop_length</strong> (<em>int &gt; 0</em><em>, </em><em>optional</em>) – The number of samples between successive frames used in the short
term fourier transform to generate MFCC values. The default is 512.</p></li>
<li><p><strong>n_fft</strong> (<em>int &gt; 0</em><em>, </em><em>optional</em>) – The length of the FFT window used to calculate the MFCC values.
The default is 2048.</p></li>
<li><p><strong>bandpass</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, the song will be bandpass filtered before calculating the
MFCC. If False, the MFCC will be calculated on the song as-is.
The default is True.</p></li>
<li><p><strong>lower_cutoff</strong> (<em>float &gt;=0</em><em>, </em><em>optional</em>) – The lower frequency limit in Hz used to bandpass filter the input
wave before calculating the MFCC. The default is 200.</p></li>
<li><p><strong>upper_cutoff</strong> (<em>float &gt; lower_cutoff</em><em>, </em><em>optional</em>) – The upper frequency limit in Hz used to bandpass filter the input
wave before calculating the MFCC. The default is 9000.</p></li>
<li><p><strong>rescale</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, the MFCC will be min-max rescaled so that all values fall
between 0 and 1. This is meant to ensure consistency across
recordings. If False, the raw MFCC values will be returned.
The default is True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>mfcc</strong> – 1 dimensional numpy array containing the MFCC values for the input
wave.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy ndarray, 1D</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="avn.segmentation.MFCCDerivative">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">avn.segmentation.</span></code><code class="sig-name descname"><span class="pre">MFCCDerivative</span></code><a class="headerlink" href="#avn.segmentation.MFCCDerivative" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="segmentation.html#avn.segmentation.Segmenter" title="avn.segmentation.Segmenter"><code class="xref py py-class docutils literal notranslate"><span class="pre">avn.segmentation.Segmenter</span></code></a></p>
<p>Child class of avn.segmentation.Segmenter(), which segments syllables based
on threshold crossing of an estimate of the first derivative of the first
mel frequency cepstral coefficient (MFCC).</p>
<dl class="py method">
<dt id="avn.segmentation.MFCCDerivative.get_seg_criteria">
<code class="sig-name descname"><span class="pre">get_seg_criteria</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">song</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hop_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">512</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_fft</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2048</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bandpass</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rescale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deriv_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.MFCCDerivative.get_seg_criteria" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the first derivative of the MFCC at every frame of a song
file for later use in threshold crossing-based segmentation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>song</strong> (<em>avn.dataloading.SongFile class instance</em>) – Contains audio data for a single song file</p></li>
<li><p><strong>hop_length</strong> (<em>int &gt; 0</em><em>, </em><em>optional</em>) – The number of samples between successive frames used in the short
term fourier transform to generate MFCC values. The default is 512.</p></li>
<li><p><strong>n_fft</strong> (<em>int &gt; 0</em><em>, </em><em>optional</em>) – The length of the FFT window used to calculate the MFCC values.
The default is 2048.</p></li>
<li><p><strong>bandpass</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, the song will be bandpass filtered before calculating the
MFCC. If False, the MFCC will be calculated on the song as-is.
The default is True.</p></li>
<li><p><strong>lower_cutoff</strong> (<em>float &gt;=0</em><em>, </em><em>optional</em>) – The lower frequency limit in Hz used to bandpass filter the input
wave before calculating the MFCC. The default is 200.</p></li>
<li><p><strong>upper_cutoff</strong> (<em>float &gt; lower_cutoff</em><em>, </em><em>optional</em>) – The upper frequency limit in Hz used to bandpass filter the input
wave before calculating the MFCC. The default is 9000.</p></li>
<li><p><strong>rescale</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, the MFCC will be min-max rescaled so that all values fall
between 0 and 1 before the first derivative is taken. This is meant
to ensure consistency across recordings. If False, the first
derivative is calculated on the raw MFCC.
The default is True.</p></li>
<li><p><strong>deriv_width</strong> (<em>int &gt;=3</em><em>, </em><em>odd</em><em>, </em><em>optional.</em>) – Number of frames over which to compute the change in MFCC to
estimate the first derivative.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>mfcc_derivative</strong> – 1 dimensional numpy array containing an estimate of the first
derivative of the MFCC of the input wave.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy ndarray, 1D</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="avn.segmentation.Metrics">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">avn.segmentation.</span></code><code class="sig-name descname"><span class="pre">Metrics</span></code><a class="headerlink" href="#avn.segmentation.Metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Contains functions for calculating segmentation accuracy metrics by comparing
automatically generates syllable segmentations to ‘ground truth’ segmentations.</p>
<dl class="py method">
<dt id="avn.segmentation.Metrics.calc_F1">
<code class="sig-name descname"><span class="pre">calc_F1</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_gap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.Metrics.calc_F1" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the F1 score, precision and recall of syllable onsets in
seg_data.seg_table relative to seg_data.true_seg_table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seg_data</strong> (<em>avn.segmentation.SegData instance</em>) – Instance of a SegData object which must have valid <cite>.seg_table</cite>
and <cite>.true_seg_table</cite> attributes.</p></li>
<li><p><strong>max_gap</strong> (<em>float</em><em>, </em><em>optional</em>) – The maximum allowable gap in seconds between a syllable onset in
<cite>seg_data.seg_table</cite> and in <cite>seg_data.true_seg_table</cite> that will
be considered a match. The default is 0.05.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>seg_data</strong> – This will be the same seg_data object as is passed as an argument,
with an added <cite>.seg_metrics</cite> attribute which contains a DataFrame
with columns <cite>F1</cite>, <cite>precision</cite> and <cite>recall</cite> and a single row with
the value of each metric.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>avn.segmentation.SegData instance</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="avn.segmentation.Plot">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">avn.segmentation.</span></code><code class="sig-name descname"><span class="pre">Plot</span></code><a class="headerlink" href="#avn.segmentation.Plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Contains functions for plotting automatically generated syllable segmentations,
segmentation criteria and/or ground truth syllable segmentations over
spectrograms.</p>
<dl class="py method">
<dt id="avn.segmentation.Plot.plot_seg_criteria">
<code class="sig-name descname"><span class="pre">plot_seg_criteria</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">segmenter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(20,</span> <span class="pre">5)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.Plot.plot_seg_criteria" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots a given segmentation criteria (ie MFCC, RMSE, RMSE Derivative)
over the spectrogram of a given song file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seg_data</strong> (<em>avn.segmentation.SegData object</em>) – SegData object with valid <cite>.seg_table</cite> and <cite>.song_folder_path</cite>
attributes.</p></li>
<li><p><strong>segmenter</strong> (<em>avn.segmentation.Segmenter daughter class object</em>) – The type of the segmenter (ie MFCC, RMSE, RMSEDerivative) determines
which segmentation criteria will be plotted</p></li>
<li><p><strong>label</strong> (<em>str</em>) – Label of segmentation criteria to be displayed in plot legend.</p></li>
<li><p><strong>file_idx</strong> (int &gt;=0, &lt;total number of files segmented in <cite>seg_data</cite>, optional) – The index of the single file within <cite>seg_data</cite> to be plotted.
The default is 0.</p></li>
<li><p><strong>figsize</strong> (<em>tuple of floats</em><em>, </em><em>optional</em>) – Specifies the dimensions of the output plot. The default is (20, 5).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="avn.segmentation.Plot.plot_segmentations">
<code class="sig-name descname"><span class="pre">plot_segmentations</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seg_label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_ground_truth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">true_label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Ground</span> <span class="pre">Truth'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(20,</span> <span class="pre">5)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seg_attribute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'onsets'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.Plot.plot_segmentations" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the spectrogram of a given wave file with automatically generated
syllable onsets or offsets plotted over top. Ground truth segmentations
can be plotted in addition to automatically generate segmentations
when available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seg_data</strong> (<em>avn.segmentation.SegData object</em>) – SegData object containing automatic syllable segmentations in it’s
<cite>.seg_table</cite> attribute, and optionally also ground truth
segmentations in its <cite>.true_seg_table</cite> attribute.</p></li>
<li><p><strong>seg_label</strong> (<em>str</em>) – Label for automatic syllable segmentations to be displayed in legend.</p></li>
<li><p><strong>plot_ground_truth</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, both the automatically generated and ground truth syllable
segmentations will be plotted. If False, only automatically
generated syllable segmentations will be plotted. The default is
False.</p></li>
<li><p><strong>true_label</strong> (<em>str</em><em>, </em><em>optional</em>) – Label for ground truth syllable segmentations to be displayed in
legend. Only used if <cite>plot_ground_truth</cite> == True.
The default is ‘Ground Truth’.</p></li>
<li><p><strong>file_idx</strong> (int &gt;=0, &lt;total number of files segmented in <cite>seg_data</cite>, optional) – The index of the single file within <cite>seg_data</cite> to be plotted.
The default is 0.</p></li>
<li><p><strong>figsize</strong> (<em>tuple of floats</em><em>, </em><em>optional</em>) – Specifies the dimensions of the output plot. The default is (20, 5).</p></li>
<li><p><strong>seg_attribute</strong> (<em>{'onsets'</em><em>, </em><em>'offsets'}</em><em>, </em><em>optional</em>) – Specifies whether syllable onset times or offset times should be
displayed. The default is ‘onsets’.</p></li>
<li><p><strong>plot_title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of the generated plot. The default is “”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="avn.segmentation.RMSE">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">avn.segmentation.</span></code><code class="sig-name descname"><span class="pre">RMSE</span></code><a class="headerlink" href="#avn.segmentation.RMSE" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="segmentation.html#avn.segmentation.Segmenter" title="avn.segmentation.Segmenter"><code class="xref py py-class docutils literal notranslate"><span class="pre">avn.segmentation.Segmenter</span></code></a></p>
<p>Child class of avn.segmentation.Segmenter(), which segments syllables based
on root mean square energy (RMSE) threshold crossing.</p>
<dl class="py method">
<dt id="avn.segmentation.RMSE.get_seg_criteria">
<code class="sig-name descname"><span class="pre">get_seg_criteria</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">song</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hop_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">256</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_fft</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2048</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bandpass</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rescale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.RMSE.get_seg_criteria" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the RMSE at every frame of a song file for later use in
threshold crossing-based segmentation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>song</strong> (<em>avn.dataloading.SongFile class instance</em>) – Contains audio data for a single song file</p></li>
<li><p><strong>hop_length</strong> (<em>int &gt; 0</em><em>, </em><em>optional</em>) – The number of samples between successive frames used in the short
term fourier transform to generate RMSE values. The default is 256.</p></li>
<li><p><strong>n_fft</strong> (<em>int &gt; 0</em><em>, </em><em>optional</em>) – The length of the FFT window used to calculate the RMSE values.
The default is 2048.</p></li>
<li><p><strong>bandpass</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, the song will be bandpass filtered before calculating the
RMSE. If False, the RMSE will be calculated on the song as-is.
The default is True.</p></li>
<li><p><strong>lower_cutoff</strong> (<em>float &gt;=0</em><em>, </em><em>optional</em>) – The lower frequency limit in Hz used to bandpass filter the input
wave before calculating the RMSE. The default is 200.</p></li>
<li><p><strong>upper_cutoff</strong> (<em>float &gt; lower_cutoff</em><em>, </em><em>optional</em>) – The upper frequency limit in Hz used to bandpass filter the input
wave before calculating the RMSE. The default is 9000.</p></li>
<li><p><strong>rescale</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, the RMSE will be min-max rescaled so that all values fall
between 0 and 1. This is meant to ensure consistency across
recordings. If False, the raw RMSE values will be returned.
The default is True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rmse</strong> – 1 dimensional numpy array containing the RMSE values for the input
wave.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy ndarray, 1D</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="avn.segmentation.RMSEDerivative">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">avn.segmentation.</span></code><code class="sig-name descname"><span class="pre">RMSEDerivative</span></code><a class="headerlink" href="#avn.segmentation.RMSEDerivative" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="segmentation.html#avn.segmentation.Segmenter" title="avn.segmentation.Segmenter"><code class="xref py py-class docutils literal notranslate"><span class="pre">avn.segmentation.Segmenter</span></code></a></p>
<p>Child class of avn.segmentation.Segmenter(), which segments syllables based
on threshold crossing of the first derivative of the root mean square
energy (RMSE).</p>
<dl class="py method">
<dt id="avn.segmentation.RMSEDerivative.get_seg_criteria">
<code class="sig-name descname"><span class="pre">get_seg_criteria</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">song</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hop_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">256</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_fft</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2048</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bandpass</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rescale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deriv_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.RMSEDerivative.get_seg_criteria" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the first derivative of the RMSE at every frame of a song
file for later use in threshold crossing-based segmentation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>song</strong> (<em>avn.dataloading.SongFile class instance</em>) – Contains audio data for a single song file</p></li>
<li><p><strong>hop_length</strong> (<em>int &gt; 0</em><em>, </em><em>optional</em>) – The number of samples between successive frames used in the short
term fourier transform to generate RMSE values. The default is 256.</p></li>
<li><p><strong>n_fft</strong> (<em>int &gt; 0</em><em>, </em><em>optional</em>) – The length of the FFT window used to calculate the RMSE values.
The default is 2048.</p></li>
<li><p><strong>bandpass</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, the song will be bandpass filtered before calculating the
RMSE. If False, the RMSE will be calculated on the song as-is.
The default is True.</p></li>
<li><p><strong>lower_cutoff</strong> (<em>float &gt;=0</em><em>, </em><em>optional</em>) – The lower frequency limit in Hz used to bandpass filter the input
wave before calculating the RMSE. The default is 200.</p></li>
<li><p><strong>upper_cutoff</strong> (<em>float &gt; lower_cutoff</em><em>, </em><em>optional</em>) – The upper frequency limit in Hz used to bandpass filter the input
wave before calculating the RMSE. The default is 9000.</p></li>
<li><p><strong>rescale</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, the RMSE will be min-max rescaled so that all values fall
between 0 and 1 before the first derivative is taken. This is meant
to ensure consistency across recordings. If False, the first
derivative is calculated on the raw RMSE.
The default is True.</p></li>
<li><p><strong>deriv_width</strong> (<em>int &gt;=3</em><em>, </em><em>odd</em><em>, </em><em>optional.</em>) – Number of frames over which to compute the change in RMSE to
estimate the first derivative.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rmse_derivative</strong> – 1 dimensional numpy array containing an estimate of the first
derivative of the RMSE of the input wave.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy ndarray, 1D</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="avn.segmentation.SegData">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">avn.segmentation.</span></code><code class="sig-name descname"><span class="pre">SegData</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Bird_ID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seg_table</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.SegData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Syllable segmentation data for many files from a single bird.</p>
<dl class="py attribute">
<dt id="avn.segmentation.SegData.Bird_ID">
<code class="sig-name descname"><span class="pre">Bird_ID</span></code><a class="headerlink" href="#avn.segmentation.SegData.Bird_ID" title="Permalink to this definition">¶</a></dt>
<dd><p>String containing a unique identifier for subject bird.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="avn.segmentation.SegData.seg_table">
<code class="sig-name descname"><span class="pre">seg_table</span></code><a class="headerlink" href="#avn.segmentation.SegData.seg_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Dataframe with columns <cite>onsets</cite>, <cite>offsets</cite> and <cite>files</cite>, which contains
the onset and offset times in seconds of every syllable, and the
syllable’s corresponding file. This is generated by an
avn.segmentation.Segmenter class object with the function
<cite>make_segmentation_table</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>pandas DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="avn.segmentation.SegData.true_seg_table">
<code class="sig-name descname"><span class="pre">true_seg_table</span></code><a class="headerlink" href="#avn.segmentation.SegData.true_seg_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Dataframe with columns <cite>files</cite>, <cite>labels</cite>, <cite>onsets</cite> and <cite>offsets</cite>,
which contains ground truth segmentation information for calculation
of automatic segmentation metrics. <cite>labels</cite> contains only {‘n’, ‘s’},
to indicate whether a row reflects a true song syllable (‘s’) or cage
noise (‘n’).
This can be imported from evsonganaly with the
<cite>avn.dataloading.add_ev_song_truth_table()</cite> function.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>pandas DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="avn.segmentation.SegData.seg_metrics">
<code class="sig-name descname"><span class="pre">seg_metrics</span></code><a class="headerlink" href="#avn.segmentation.SegData.seg_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Dataframe with columns <cite>F1</cite>, <cite>precision</cite> and <cite>recall</cite> conatining a
single row with each metric calculated by comparing segmentations in
<cite>SegData.seg_table</cite> to <cite>SegData.true_seg_table</cite>.
This is generated with the function <cite>segmentation.Metrics.calc_F1()</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>pandas DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="avn.segmentation.SegData.save_as_csv">
<code class="sig-name descname"><span class="pre">save_as_csv</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out_folder_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.SegData.save_as_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the contents of SegData.seg_table and SegData.seg_metrics as csv
files in the <cite>out_folder_path</cite> directory.</p>
</dd></dl>

<dl class="py method">
<dt id="id1">
<code class="sig-name descname"><span class="pre">save_as_csv</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out_folder_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id1" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves SegData.seg_table and SegData.seg_metrics as csv files in the
<cite>out_folder_path</cite> directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>out_folder_path</strong> (<em>str</em>) – Path to local directory in which to save csv files.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The SegData.seg_table file will be called “[Bird_ID]_seg_table.csv”,
and the SegData.seg_metrics file will be called
“[Bird_ID]_seg_metrics.csv”.</p>
<p>If either the .seg_table or .seg_metrics attributes do not exist, the
corresponding file will not be created.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="avn.segmentation.Segmenter">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">avn.segmentation.</span></code><code class="sig-name descname"><span class="pre">Segmenter</span></code><a class="headerlink" href="#avn.segmentation.Segmenter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Parent class for automated syllable segmentation</p>
<dl class="py attribute">
<dt id="avn.segmentation.Segmenter.None">
<code class="sig-name descname"><span class="pre">None</span></code><a class="headerlink" href="#avn.segmentation.Segmenter.None" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="avn.segmentation.Segmenter.make_segmentation_table">
<code class="sig-name descname"><span class="pre">make_segmentation_table</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Bird_ID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">song_folder_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_threshold</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.Segmenter.make_segmentation_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a SegData object with syllable segmentation information for
all .wav files in <cite>song_folder_path</cite></p>
</dd></dl>

<dl class="py method">
<dt id="avn.segmentation.Segmenter.get_seg_criteria">
<code class="sig-name descname"><span class="pre">get_seg_criteria</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">song</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.Segmenter.get_seg_criteria" title="Permalink to this definition">¶</a></dt>
<dd><p>For threshold based segmentation, this calculates the song feature on
which to apply threshold segmentation (eg. RMSE, MFCC, MFCC Derivative)</p>
</dd></dl>

<dl class="py method">
<dt id="avn.segmentation.Segmenter.rescale">
<code class="sig-name descname"><span class="pre">rescale</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seg_criteria</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.Segmenter.rescale" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies 0 to 1 min-max rescaling to a vector.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname"><span class="pre">get_threshold(seg_criteria,</span> <span class="pre">thresh):</span></code></dt>
<dd><p>Generates a flat threshold vetor for comparison to seg_criteria for
threshold based segmentation.</p>
</dd></dl>

<dl class="py method">
<dt id="avn.segmentation.Segmenter.get_syll_onsets_offsets">
<code class="sig-name descname"><span class="pre">get_syll_onsets_offsets</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seg_criteria</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_thresh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_thresh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_file_duration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.Segmenter.get_syll_onsets_offsets" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns onsets and offset timestamps of all syllables in a file based
on seg_criteria threshold crossings.</p>
</dd></dl>

<p class="rubric">Notes</p>
<p>An instance of this parent class cannot be used to generate syllable
segmentations, as the <cite>get_seg_criteria()</cite> function is not implemented.
Instead, please use one of the child classes which each use a different
segmentation criteria (e.g RMSE, RMSEDerivative, MFCC, MFCCDerivative)</p>
<dl class="py method">
<dt id="id2">
<code class="sig-name descname"><span class="pre">get_seg_criteria</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">song</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="id3">
<code class="sig-name descname"><span class="pre">make_segmentation_table</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Bird_ID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">song_folder_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_syll_duration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.33</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id3" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Bird_ID</strong> (<em>str</em>) – String containing a unique identifier for subject bird.</p></li>
<li><p><strong>song_folder_path</strong> (<em>str</em>) – Path to a local directory containing all .wav files to be segmented.</p></li>
<li><p><strong>upper_threshold</strong> (<em>float &gt; lower_threshold</em>) – Value of the upper segmentation criteria threshold for detecting
syllable onsets.</p></li>
<li><p><strong>lower_threshold</strong> (<em>float &lt; upper_threshold</em>) – Value of the lower segmentation criteria threshold used for detecting
syllable offsets when onset to onset segmentation results in a
syllable longer than <cite>max_syll_duration</cite>.
DESCRIPTION.</p></li>
<li><p><strong>max_syll_duration</strong> (<em>float &gt; 0</em><em>, </em><em>optional</em>) – Maximum allowable syllable duration in seconds. The default is 0.33.
If the gap between consecutive syllabel onsets is longer than this
value, the offset will be determined by lower threshold crossing.
If the lower threshold crossing still results in a syllable longer
than this value, the syllable offset will be set to the onset
timestamp + <cite>max_syll_duration</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>segmentation_data</strong> – SegData object with attributes <cite>.Bird_ID</cite> and <cite>.seg_table</cite>, where
<cite>.seg_table</cite> is a pandas Dataframe with columns <cite>onsets</cite>, <cite>offsets</cite>
and <cite>files</cite>, which contains the onset and offset times in seconds
of every syllable, and the syllable’s corresponding file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>avn.segmentation.SegData object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="id4">
<code class="sig-name descname"><span class="pre">rescale</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seg_criteria</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id4" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies 0 to 1 min-max rescaling to a vector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>seg_criteria</strong> (<em>numpy ndarray</em><em>, </em><em>1D</em>) – 1 dimensional numpy array to be rescaled</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>seg_criteria</strong> – 1 dimensional numpy array rescaled between 0 and 1.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy ndarray, 1D</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="avn.segmentation.Utils">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">avn.segmentation.</span></code><code class="sig-name descname"><span class="pre">Utils</span></code><a class="headerlink" href="#avn.segmentation.Utils" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Contains syllable segmentation utilities</p>
<dl class="py method">
<dt id="avn.segmentation.Utils.calc_F1_many_birds">
<code class="sig-name descname"><span class="pre">calc_F1_many_birds</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Bird_IDs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truth_table_suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'_syll_table.csv'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.Utils.calc_F1_many_birds" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the segmentation metrics for all birds in <cite>Bird_IDs</cite> with
a given method and threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>segmenter</strong> (<em>avn.segmentation.Segmenter daughter class object.</em>) – Determines the segmentation method.</p></li>
<li><p><strong>Bird_IDs</strong> (<em>List of strings</em>) – List of unique bird identifiers. These should correspond to the
names of subfolders within the <cite>folder_path</cite> directory.</p></li>
<li><p><strong>folder_path</strong> (<em>str</em>) – Path to a local directory containing subdirectories named with the
Bird IDs in <cite>Bird_IDs</cite>, which in turn contain the .wav files to be
segmented.</p></li>
<li><p><strong>upper_threshold</strong> (<em>float &gt; lower_threshold</em>) – Value of the upper segmentation criteria threshold for detecting
syllable onsets.</p></li>
<li><p><strong>lower_threshold</strong> (<em>float &lt; upper_threshold</em>) – Value of the lower segmentation criteria threshold used for detecting
syllable offsets.</p></li>
<li><p><strong>truth_table_suffix</strong> (<em>str</em><em>, </em><em>optional</em>) – This function requires that the truth table data be located in a
.csv file within folder_pathBird_IDand begin with the Bird_ID
followed by some descriptor. This is used to specify that final
part of the file name. The default is “_syll_table.csv”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>segmentation_scores</strong> (<em>pandas DataFrame</em>) – DataFrame with columns <cite>F1</cite>, <cite>precision</cite>, <cite>recall</cite>, <cite>upper_threshold</cite>,
<cite>lower_threshold</cite>, and <cite>Bird_ID</cite>, which contains the segmentation
metrics for each bird.</p></li>
<li><p><strong>segmentations_df</strong> (<em>pandas DataFrame</em>) – DataFrame with columns <cite>onsets, `offsets</cite>, <cite>files</cite>, and <cite>Bird_ID</cite>
which contains the onset and offset timestamps of every segmented
syllable in each file for each bird.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="avn.segmentation.Utils.make_segmentation_table_many_birds">
<code class="sig-name descname"><span class="pre">make_segmentation_table_many_birds</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Bird_IDs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_to_csv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_file_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.Utils.make_segmentation_table_many_birds" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates syllable segmentations for many files across many birds.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>segmenter</strong> (<em>avn.segmentation.Segmenter child class type</em>) – This determines the segmentation criteria used for threshold
segmentation.</p></li>
<li><p><strong>Bird_IDs</strong> (<em>List of strings</em>) – List of unique bird identifiers. These should correspond to the
names of subfolders within the <cite>folder_path</cite> directory.</p></li>
<li><p><strong>folder_path</strong> (<em>str</em>) – Path to a local directory containing subdirectories named with the
Bird IDs in <cite>Bird_IDs</cite>, which in turn contain the .wav files to be
segmented.</p></li>
<li><p><strong>upper_threshold</strong> (<em>float &gt; lower_threshold</em>) – Value of the upper segmentation criteria threshold for detecting
syllable onsets.</p></li>
<li><p><strong>lower_threshold</strong> (<em>float &lt; upper_threshold</em>) – Value of the lower segmentation criteria threshold used for detecting
syllable offsets.</p></li>
<li><p><strong>save_to_csv</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, segmentation table and metrics table .csv files will be saved
for each bird in the <cite>out_file_dir</cite> directory. These will have
the Bird_ID in the file name. The default is False.</p></li>
<li><p><strong>out_file_dir</strong> (<em>str</em><em>, </em><em>optional</em>) – Path to a local directory in which to save segmentation table
and metrics tables for each bird. This will only be used if
<cite>save_to_csv</cite> == True. The default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>segmentations_df</strong> – DataFrame with columns <cite>onsets</cite>, <cite>offsets</cite>, <cite>files</cite> and <cite>Bird_ID</cite>
which contains syllable onset and offset timestamps in seconds
for every automatically segmented syllable in every file for every
bird.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="avn.segmentation.Utils.plot_segmentations_many_birds">
<code class="sig-name descname"><span class="pre">plot_segmentations_many_birds</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Bird_IDs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seg_label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_ground_truth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">files_per_bird</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2021</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">true_label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Ground</span> <span class="pre">Truth'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(20,</span> <span class="pre">5)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seg_attribute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'onsets'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truth_table_suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'_syll_table.csv'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.Utils.plot_segmentations_many_birds" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots <cite>files_per_bird</cite> number of random example song spectrograms
with automatically generated segmentations (and optionally ground truth
segmentations) overlaid for each bird in Bird_IDs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>segmenter</strong> (<em>avn.segmentation.Segmenter child class type</em>) – This determines the segmentation criteria used for threshold
segmentation.</p></li>
<li><p><strong>Bird_IDs</strong> (<em>List of strings</em>) – List of unique bird identifiers. These should correspond to the
names of subfolders within the <cite>folder_path</cite> directory.</p></li>
<li><p><strong>folder_path</strong> (<em>str</em>) – Path to a local directory containing subdirectories named with the
Bird IDs in <cite>Bird_IDs</cite>, which in turn contain the .wav files to be
segmented.</p></li>
<li><p><strong>seg_label</strong> (<em>str</em>) – Label for automatic syllable segmentations to be displayed in legend.</p></li>
<li><p><strong>upper_threshold</strong> (<em>float &gt; lower_threshold</em>) – Value of the upper segmentation criteria threshold for detecting
syllable onsets.</p></li>
<li><p><strong>lower_threshold</strong> (<em>float &lt; upper_threshold</em>) – Value of the lower segmentation criteria threshold used for detecting
syllable offsets.</p></li>
<li><p><strong>plot_ground_truth</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, both the automatically generated and ground truth syllable
segmentations will be plotted. If False, only automatically
generated syllable segmentations will be plotted. The default is
False.</p></li>
<li><p><strong>files_per_bird</strong> (<em>int&gt;=1</em><em>, </em><em>optional</em>) – The number of files to plot from each bird. The default is 3.</p></li>
<li><p><strong>random_seed</strong> (<em>optional</em>) – Any object that can be converted to an integer. This ensures that
the same set of randomly selected files will be plotted every time
this function is run with the same random_seed value.
The default is 2021.</p></li>
<li><p><strong>true_label</strong> (<em>str</em><em>, </em><em>optional</em>) – Label for ground truth syllable segmentations to be displayed in
legend. Only used if <cite>plot_ground_truth</cite> == True.
The default is ‘Ground Truth’.</p></li>
<li><p><strong>figsize</strong> (<em>tuple of floats</em><em>, </em><em>optional</em>) – Specifies the dimensions of the output plot. The default is (20, 5).</p></li>
<li><p><strong>seg_attribute</strong> (<em>{'onsets'</em><em>, </em><em>'offsets'}</em><em>, </em><em>optional</em>) – Specifies whether syllable onset times or offset times should be
displayed. The default is ‘onsets’.</p></li>
<li><p><strong>truth_table_suffix</strong> (<em>str</em><em>, </em><em>optional</em>) – This function requires that the truth table data be located in a
.csv file within folder_pathBird_IDand begin with the Bird_ID
followed by some descriptor. This is used to specify that final
part of the file name. The default is “_syll_table.csv”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="avn.segmentation.Utils.threshold_optimization">
<code class="sig-name descname"><span class="pre">threshold_optimization</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Bird_ID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">song_folder_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truth_table_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold_range</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_threshold</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.Utils.threshold_optimization" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests a range of upper threshold values for threshold-based segmentation
to find the threshold which results in the best F1 score for one bird.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>segmenter</strong> (<em>avn.segmentation.Segmenter daughter class object</em>) – Determines the segmentation criteria that will be used for threshold
segmentation (ie RMSE, MFCC, RMSEDerivative)</p></li>
<li><p><strong>Bird_ID</strong> (<em>str</em>) – String containing a unique identifier for subject bird.</p></li>
<li><p><strong>song_folder_path</strong> (<em>str</em>) – Path to the folder containing all .wav files to be segmented for
the subject bird.</p></li>
<li><p><strong>truth_table_path</strong> (<em>str</em>) – Path to the .csv file generated with evsonganaly which contains the
ground truth syllable segmentations.</p></li>
<li><p><strong>threshold_range</strong> (<em>tuple of floats</em>) – Specifies the range thresholds to test.</p></li>
<li><p><strong>threshold_step</strong> (<em>float</em>) – The size of the step between consequtive thresholds to be tested.</p></li>
<li><p><strong>lower_threshold</strong> (<em>float</em>) – Lower segmentation thrshold for determining syllable offsets (fixed).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>optimal_threshold</strong> (<em>float</em>) – Value of the threshold which results in the best F1 score.</p></li>
<li><p><strong>peak_F1</strong> (<em>float</em>) – F1 score of segmentation using optimal threshold.</p></li>
<li><p><strong>segmentation_scores</strong> (<em>pandas DataFrame</em>) – DataFrame with columns <cite>F1</cite>, <cite>precision</cite>, <cite>recall</cite>, <cite>upper_threshold</cite>,
and <cite>lower_threshold</cite> which contain the metrics of segmentation at
every segmentation threshold tested. This can be useful for plotting
the relationship between the threshold value and metrics.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Selecting a very wide <cite>threshold_range</cite> and small <cite>threshold_step</cite> can
make this quite slow to run. It is recommended to test a wide
<cite>threshold_range</cite> with large <cite>threshold_step</cite> and plot F1 across
threshold values using <cite>segmentation_scores</cite> initially, then once
you have a better idea of the ballpark of the peak threshold try using
a smaller <cite>threshold_range</cite> with a finer <cite>threshold_step</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="avn.segmentation.Utils.threshold_optimization_many_birds">
<code class="sig-name descname"><span class="pre">threshold_optimization_many_birds</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Bird_IDs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold_range</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truth_table_suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'_syll_table.csv'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avn.segmentation.Utils.threshold_optimization_many_birds" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the optimal segmentation threshold across multiple birds at once.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>segmenter</strong> (<em>avn.segmentation.Segmenter child class type</em>) – This determines the segmentation criteria used for threshold
segmentation.</p></li>
<li><p><strong>Bird_IDs</strong> (<em>List of strings</em>) – List of unique bird identifiers. These should correspond to the
names of subfolders within the <cite>folder_path</cite> directory.</p></li>
<li><p><strong>folder_path</strong> (<em>str</em>) – Path to a local directory containing subdirectories named with the
Bird IDs in <cite>Bird_IDs</cite>, which in turn contain the .wav files to be
segmented.</p></li>
<li><p><strong>threshold_range</strong> (<em>tuple of floats</em>) – Specifies the range thresholds to test.</p></li>
<li><p><strong>threshold_step</strong> (<em>float</em>) – The size of the step between consequtive thresholds to be tested.</p></li>
<li><p><strong>lower_threshold</strong> (<em>float</em>) – Lower segmentation thrshold for determining syllable offsets (fixed).</p></li>
<li><p><strong>truth_table_suffix</strong> (<em>str</em><em>, </em><em>optional</em>) – This function requires that the truth table data be located in a
.csv file within folder_pathBird_IDand begin with the Bird_ID
followed by some descriptor. This is used to specify that final
part of the file name. The default is “_syll_table.csv”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>optimal_threshold</strong> (<em>float</em>) – Value of the threshold which results in the best mean F1 score
across all birds.</p></li>
<li><p><strong>peak_mean_F1</strong> (<em>float</em>) – Mean F1 score of segmentation using optimal threshold across all birds.</p></li>
<li><p><strong>segmentation_scores</strong> (<em>pandas DataFrame</em>) – DataFrame with columns <cite>F1</cite>, <cite>precision</cite>, <cite>recall</cite>, <cite>upper_threshold</cite>,
<cite>lower_threshold</cite>, and <cite>Bird_ID</cite> which contain the metrics of
segmentation at every segmentation threshold tested for every bird.
This can be useful for plotting the relationship between the
threshold value and metrics.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Selecting a very wide <cite>threshold_range</cite> and small <cite>threshold_step</cite> can
make this quite slow to run. It is recommended to test a wide
<cite>threshold_range</cite> with large <cite>threshold_step</cite> and plot F1 across
threshold values using <cite>segmentation_scores</cite> initially, then once
you have a better idea of the ballpark of the peak threshold try using
a smaller <cite>threshold_range</cite> with a finer <cite>threshold_step</cite>.</p>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="modules.html" class="btn btn-neutral float-left" title="avn" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Therese Koch.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>